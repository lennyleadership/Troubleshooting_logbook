---
weight: 
title: ""
author: "Lenny Lin"
categories: ["Troubleshooting Database"]
tags: ["Fishbone Demo"]
toc: true
date: "2022-08-16"
lastmod: "2022-08-16"
---


<div id="TOC">

</div>

<!--more-->
<hr />
<p><img src="/posts/01_Troubleshooting_database/fishbone_template_files/figure-html/template-1.png" width="672" /></p>
<p><img src="/posts/01_Troubleshooting_database/fishbone_template_files/figure-html/SixSigma%20package-1.png" width="672" /></p>
<div id="qcc-package" class="section level2">
<h2>QCC package</h2>
<p><img src="/posts/01_Troubleshooting_database/fishbone_template_files/figure-html/qcc%20package-1.png" width="672" /></p>
</div>
<div id="js" class="section level2">
<h2>js</h2>
<pre class="js"><code>function init() {
    if (window.goSamples) goSamples();  // init for these samples -- you don&#39;t need to call this
    var $ = go.GraphObject.make;  // for conciseness in defining templates

    myDiagram =
      $(go.Diagram, &quot;myDiagramDiv&quot;,  // refers to its DIV HTML element by id
        { isReadOnly: true });  // do not allow the user to modify the diagram

    // define the normal node template, just some text
    myDiagram.nodeTemplate =
      $(go.Node,
        $(go.TextBlock,
          new go.Binding(&quot;text&quot;),
          new go.Binding(&quot;font&quot;, &quot;&quot;, convertFont))
      );

    function convertFont(data) {
      var size = data.size;
      if (size === undefined) size = 13;
      var weight = data.weight;
      if (weight === undefined) weight = &quot;&quot;;
      return weight + &quot; &quot; + size + &quot;px sans-serif&quot;;
    }

    // This demo switches the Diagram.linkTemplate between the &quot;normal&quot; and the &quot;fishbone&quot; templates.
    // If you are only doing a FishboneLayout, you could just set Diagram.linkTemplate
    // to the template named &quot;fishbone&quot; here, and not switch templates dynamically.

    // define the non-fishbone link template
    myDiagram.linkTemplateMap.add(&quot;normal&quot;,
      $(go.Link,
        { routing: go.Link.Orthogonal, corner: 4 },
        $(go.Shape)
      ));

    // use this link template for fishbone layouts
    myDiagram.linkTemplateMap.add(&quot;fishbone&quot;,
      $(FishboneLink,  // defined above
        $(go.Shape)
      ));

    // here is the structured data used to build the model
    var json =
    {
      &quot;text&quot;: &quot;Incorrect Deliveries&quot;, &quot;size&quot;: 18, &quot;weight&quot;: &quot;Bold&quot;, &quot;causes&quot;: [
        {
          &quot;text&quot;: &quot;Skills&quot;, &quot;size&quot;: 14, &quot;weight&quot;: &quot;Bold&quot;, &quot;causes&quot;: [
            {
              &quot;text&quot;: &quot;knowledge&quot;, &quot;weight&quot;: &quot;Bold&quot;, &quot;causes&quot;: [
                {
                  &quot;text&quot;: &quot;procedures&quot;, &quot;causes&quot;: [
                    { &quot;text&quot;: &quot;documentation&quot; }
                  ]
                },
                { &quot;text&quot;: &quot;products&quot; }
              ]
            },
            { &quot;text&quot;: &quot;literacy&quot;, &quot;weight&quot;: &quot;Bold&quot; }
          ]
        },
        {
          &quot;text&quot;: &quot;Procedures&quot;, &quot;size&quot;: 14, &quot;weight&quot;: &quot;Bold&quot;, &quot;causes&quot;: [
            {
              &quot;text&quot;: &quot;manual&quot;, &quot;weight&quot;: &quot;Bold&quot;, &quot;causes&quot;: [
                { &quot;text&quot;: &quot;consistency&quot; }
              ]
            },
            {
              &quot;text&quot;: &quot;automated&quot;, &quot;weight&quot;: &quot;Bold&quot;, &quot;causes&quot;: [
                { &quot;text&quot;: &quot;correctness&quot; },
                { &quot;text&quot;: &quot;reliability&quot; }
              ]
            }
          ]
        },
        {
          &quot;text&quot;: &quot;Communication&quot;, &quot;size&quot;: 14, &quot;weight&quot;: &quot;Bold&quot;, &quot;causes&quot;: [
            { &quot;text&quot;: &quot;ambiguity&quot;, &quot;weight&quot;: &quot;Bold&quot; },
            {
              &quot;text&quot;: &quot;sales staff&quot;, &quot;weight&quot;: &quot;Bold&quot;, &quot;causes&quot;: [
                {
                  &quot;text&quot;: &quot;order details&quot;, &quot;causes&quot;: [
                    { &quot;text&quot;: &quot;lack of knowledge&quot; }
                  ]
                }
              ]
            },
            {
              &quot;text&quot;: &quot;telephone orders&quot;, &quot;weight&quot;: &quot;Bold&quot;, &quot;causes&quot;: [
                { &quot;text&quot;: &quot;lack of information&quot; }
              ]
            },
            {
              &quot;text&quot;: &quot;picking slips&quot;, &quot;weight&quot;: &quot;Bold&quot;, &quot;causes&quot;: [
                { &quot;text&quot;: &quot;details&quot; },
                { &quot;text&quot;: &quot;legibility&quot; }
              ]
            }
          ]
        },
        {
          &quot;text&quot;: &quot;Transport&quot;, &quot;size&quot;: 14, &quot;weight&quot;: &quot;Bold&quot;, &quot;causes&quot;: [
            {
              &quot;text&quot;: &quot;information&quot;, &quot;weight&quot;: &quot;Bold&quot;, &quot;causes&quot;: [
                { &quot;text&quot;: &quot;incorrect person&quot; },
                {
                  &quot;text&quot;: &quot;incorrect addresses&quot;, &quot;causes&quot;: [
                    {
                      &quot;text&quot;: &quot;customer data base&quot;, &quot;causes&quot;: [
                        { &quot;text&quot;: &quot;not up-to-date&quot; },
                        { &quot;text&quot;: &quot;incorrect program&quot; }
                      ]
                    }
                  ]
                },
                { &quot;text&quot;: &quot;incorrect dept&quot; }
              ]
            },
            {
              &quot;text&quot;: &quot;carriers&quot;, &quot;weight&quot;: &quot;Bold&quot;, &quot;causes&quot;: [
                { &quot;text&quot;: &quot;efficiency&quot; },
                { &quot;text&quot;: &quot;methods&quot; }
              ]
            }
          ]
        }
      ]
    };

    function walkJson(obj, arr) {
      var key = arr.length;
      obj.key = key;
      arr.push(obj);

      var children = obj.causes;
      if (children) {
        for (var i = 0; i &lt; children.length; i++) {
          var o = children[i];
          o.parent = key;  // reference to parent node data
          walkJson(o, arr);
        }
      }
    }

    // build the tree model
    var nodeDataArray = [];
    walkJson(json, nodeDataArray);
    myDiagram.model = new go.TreeModel(nodeDataArray);

    layoutFishbone();
  }

  // use FishboneLayout and FishboneLink
  function layoutFishbone() {
    myDiagram.startTransaction(&quot;fishbone layout&quot;);
    myDiagram.linkTemplate = myDiagram.linkTemplateMap.get(&quot;fishbone&quot;);
    myDiagram.layout = go.GraphObject.make(FishboneLayout, {  // defined above
      angle: 180,
      layerSpacing: 10,
      nodeSpacing: 20,
      rowSpacing: 10
    });
    myDiagram.commitTransaction(&quot;fishbone layout&quot;);
  }

  // make the layout a branching tree layout and use a normal link template
  function layoutBranching() {
    myDiagram.startTransaction(&quot;branching layout&quot;);
    myDiagram.linkTemplate = myDiagram.linkTemplateMap.get(&quot;normal&quot;);
    myDiagram.layout = go.GraphObject.make(go.TreeLayout, {
      angle: 180,
      layerSpacing: 20,
      alignment: go.TreeLayout.AlignmentBusBranching
    });
    myDiagram.commitTransaction(&quot;branching layout&quot;);
  }

  // make the layout a basic tree layout and use a normal link template
  function layoutNormal() {
    myDiagram.startTransaction(&quot;normal layout&quot;);
    myDiagram.linkTemplate = myDiagram.linkTemplateMap.get(&quot;normal&quot;);
    myDiagram.layout = go.GraphObject.make(go.TreeLayout, {
      angle: 180,
      breadthLimit: 1000,
      alignment: go.TreeLayout.AlignmentStart
    });
    myDiagram.commitTransaction(&quot;normal layout&quot;);
  }
  window.addEventListener(&#39;DOMContentLoaded&#39;, init);
</code></pre>
<script type="text/javascript">
function init() {
    if (window.goSamples) goSamples();  // init for these samples -- you don't need to call this
    var $ = go.GraphObject.make;  // for conciseness in defining templates

    myDiagram =
      $(go.Diagram, "myDiagramDiv",  // refers to its DIV HTML element by id
        { isReadOnly: true });  // do not allow the user to modify the diagram

    // define the normal node template, just some text
    myDiagram.nodeTemplate =
      $(go.Node,
        $(go.TextBlock,
          new go.Binding("text"),
          new go.Binding("font", "", convertFont))
      );

    function convertFont(data) {
      var size = data.size;
      if (size === undefined) size = 13;
      var weight = data.weight;
      if (weight === undefined) weight = "";
      return weight + " " + size + "px sans-serif";
    }

    // This demo switches the Diagram.linkTemplate between the "normal" and the "fishbone" templates.
    // If you are only doing a FishboneLayout, you could just set Diagram.linkTemplate
    // to the template named "fishbone" here, and not switch templates dynamically.

    // define the non-fishbone link template
    myDiagram.linkTemplateMap.add("normal",
      $(go.Link,
        { routing: go.Link.Orthogonal, corner: 4 },
        $(go.Shape)
      ));

    // use this link template for fishbone layouts
    myDiagram.linkTemplateMap.add("fishbone",
      $(FishboneLink,  // defined above
        $(go.Shape)
      ));

    // here is the structured data used to build the model
    var json =
    {
      "text": "Incorrect Deliveries", "size": 18, "weight": "Bold", "causes": [
        {
          "text": "Skills", "size": 14, "weight": "Bold", "causes": [
            {
              "text": "knowledge", "weight": "Bold", "causes": [
                {
                  "text": "procedures", "causes": [
                    { "text": "documentation" }
                  ]
                },
                { "text": "products" }
              ]
            },
            { "text": "literacy", "weight": "Bold" }
          ]
        },
        {
          "text": "Procedures", "size": 14, "weight": "Bold", "causes": [
            {
              "text": "manual", "weight": "Bold", "causes": [
                { "text": "consistency" }
              ]
            },
            {
              "text": "automated", "weight": "Bold", "causes": [
                { "text": "correctness" },
                { "text": "reliability" }
              ]
            }
          ]
        },
        {
          "text": "Communication", "size": 14, "weight": "Bold", "causes": [
            { "text": "ambiguity", "weight": "Bold" },
            {
              "text": "sales staff", "weight": "Bold", "causes": [
                {
                  "text": "order details", "causes": [
                    { "text": "lack of knowledge" }
                  ]
                }
              ]
            },
            {
              "text": "telephone orders", "weight": "Bold", "causes": [
                { "text": "lack of information" }
              ]
            },
            {
              "text": "picking slips", "weight": "Bold", "causes": [
                { "text": "details" },
                { "text": "legibility" }
              ]
            }
          ]
        },
        {
          "text": "Transport", "size": 14, "weight": "Bold", "causes": [
            {
              "text": "information", "weight": "Bold", "causes": [
                { "text": "incorrect person" },
                {
                  "text": "incorrect addresses", "causes": [
                    {
                      "text": "customer data base", "causes": [
                        { "text": "not up-to-date" },
                        { "text": "incorrect program" }
                      ]
                    }
                  ]
                },
                { "text": "incorrect dept" }
              ]
            },
            {
              "text": "carriers", "weight": "Bold", "causes": [
                { "text": "efficiency" },
                { "text": "methods" }
              ]
            }
          ]
        }
      ]
    };

    function walkJson(obj, arr) {
      var key = arr.length;
      obj.key = key;
      arr.push(obj);

      var children = obj.causes;
      if (children) {
        for (var i = 0; i < children.length; i++) {
          var o = children[i];
          o.parent = key;  // reference to parent node data
          walkJson(o, arr);
        }
      }
    }

    // build the tree model
    var nodeDataArray = [];
    walkJson(json, nodeDataArray);
    myDiagram.model = new go.TreeModel(nodeDataArray);

    layoutFishbone();
  }

  // use FishboneLayout and FishboneLink
  function layoutFishbone() {
    myDiagram.startTransaction("fishbone layout");
    myDiagram.linkTemplate = myDiagram.linkTemplateMap.get("fishbone");
    myDiagram.layout = go.GraphObject.make(FishboneLayout, {  // defined above
      angle: 180,
      layerSpacing: 10,
      nodeSpacing: 20,
      rowSpacing: 10
    });
    myDiagram.commitTransaction("fishbone layout");
  }

  // make the layout a branching tree layout and use a normal link template
  function layoutBranching() {
    myDiagram.startTransaction("branching layout");
    myDiagram.linkTemplate = myDiagram.linkTemplateMap.get("normal");
    myDiagram.layout = go.GraphObject.make(go.TreeLayout, {
      angle: 180,
      layerSpacing: 20,
      alignment: go.TreeLayout.AlignmentBusBranching
    });
    myDiagram.commitTransaction("branching layout");
  }

  // make the layout a basic tree layout and use a normal link template
  function layoutNormal() {
    myDiagram.startTransaction("normal layout");
    myDiagram.linkTemplate = myDiagram.linkTemplateMap.get("normal");
    myDiagram.layout = go.GraphObject.make(go.TreeLayout, {
      angle: 180,
      breadthLimit: 1000,
      alignment: go.TreeLayout.AlignmentStart
    });
    myDiagram.commitTransaction("normal layout");
  }
  window.addEventListener('DOMContentLoaded', init);

</script>
</div>
